module.exports = function(socket, next) {
    // а в документации написано про socket.request... ни слова про socket.handshake
    const accessToken = socket.handshake.query.accessToken;

    if (!accessToken || accessToken !== '123') {
        console.log('Not Authorized', accessToken);
        return next(new Error('Not Authorized')); // как задать код ошибки?
    }
    
    // load account
    socket.account = { id: 1 };

    next();
};